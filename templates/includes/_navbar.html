{% from "includes/_formHelper.html" import render_field %}

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <!-- Brand -->
  <a class="navbar-brand" href="/">Pepestore</a>

  <!-- Links -->

  <div class="navbar-collapse collapse order-3 dual-collapse2">
        <ul class="navbar-nav ml-auto">
            {% if 'userID' in session %}
             <li class="nav-item">
                <a class="nav-link"><img src="https://www.campaigntoendloneliness.org/wp-content/uploads/heart-1-1.png" width="28px" height="28px"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/AllChats"><img src="http://www.transparentpng.com/thumb/speech-bubble/speech-bubble-png-transparent-19.png" width="28px" height="28px"></a>
            </li>
            <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown"><img src="https://premiumbpthemes.com/images/profile-icon-flat-4.png" width="28px" height="28px">{{session['username']}}</a>
                <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item" href="/userProfile/{{session['userID']}}/">Profile</a>
                <a class="dropdown-item" href="/createUserImages">Create Listing</a>
                <a class="dropdown-item" href="/manageListing">Manage Listing</a>
                <a class="dropdown-item" href="/allListing">Listing</a>
                {% if session['userID'] == 1 %}
                <a class="dropdown-item" href="/retrieveUsers">Retrieve Users</a>
                {% endif %}
                <a class="dropdown-item" href="/createDelivery">Create Delivery</a>
                <a class="dropdown-item" href="/manageDelivery">Manage Delivery</a>
                    {% if session['userID'] == 1 %}
                <a class="dropdown-item" href="/retrieveDelivery">Retrieve Delivery Records</a>
                    {% endif %}
                <a class="dropdown-item" href="/Proof">Proof Of Delivery</a>
                <a class="dropdown-item" href="/analytics">Analytics</a>
                 <a class="dropdown-item">
                     <form name="logout" method="POST" action="{{ url_for('home') }}">
                        <div>
                        {{ logout.logout(class="btn btn-default btn-sm nav-link") }}
                        </div>
                     </form>
                 </a>
                </div>
            </li>
            </ul>
            <li class="nav-item">
                <a class="nav-link" href="/Cart"><img src="http://www.mlevel.com/wp-content/uploads/2017/07/Shopping-Cart-Icon-white.png" width="28px" height="28px"></a>
            </li>
            {% else %}
            <li class="nav-item">
                <a class="nav-link reglog" href="/allListing">Listing</a>
            </li>
            <li class="nav-item">
                <a class="nav-link reglog" onclick="openRegister()">Register</a>
            </li>
            <li class="nav-item">
                <a class="nav-link reglog" onclick="openLogin()">Login</a>
            </li>
            {% endif %}
        </ul>
    </div>
</nav>
<script>
    function openRegister() {
    document.getElementById("Register").style.display = "flex";
    }
    function closeRegister() {
    document.getElementById("Register").style.display = "none";
    }
    function openLogin() {
    document.getElementById("Login").style.display = "flex";
    }
    function closeLogin() {
    document.getElementById("Login").style.display = "none";
    }
    function returnHome() {
    window.location.href='{{ url_for('createListing') }}'
    }
</script>
{% if alert == "WPW" %}
<style>
#Login{
    display:flex;
}
</style>
{% elif alert !="" %}
<h1 class="form-popup" id="alert">{{ alert }}</h1>
{% endif %}
<div class="form-popup" id="Register">
  <form class="form-container" name="register" method="post">
    <h1>Register</h1>
    <div class="form-group">
        {{ render_field(regform.username, class="form-control") }}
        </div>
        <div class="form-group">
        {{ render_field(regform.email, class="form-control") }}
        </div>
        <div class="form-group">
        {{ render_field(regform.password, class="form-control") }}
        </div>
        <div class="form-group">
        {{ regform.register }}
        </div>
    <button type="reset" onclick="closeRegister()" class="closebtn">Close</button>
  </form>
</div>
<div class="form-popup" id="Login">
  <form class="form-container" name="login" method="post">
    <h1>Login</h1>
    <div class="form-group">
    {{ render_field(logform.username, class="form-control") }}
    </div>
    <div class="form-group">
    {{ render_field(logform.password, class="form-control") }}
    </div>
    {% if alert == "WPW" %}
      <p style="color:red">Wrong Password</p>
    {% endif %}
    <div class="form-group">
    {{ logform.login }}
    </div>
    <button type="reset" onclick="closeLogin()" class="closebtn">Close</button>
  </form>
</div>
<style>
#logout{
font-size:14.5px;
color:black;
}
.form-popup {
  display: none;
  position: fixed;
  justify-content: center;
  align-items: center;
  text-align: center;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: 11;
  }
#Login,#Register{
  background-color: rgba(0,0,0,0.5);
}
.form-container {
  max-width: 300px;
  padding: 10px;
  background-color: white;
}
.form-container input[type=text], .form-container input[type=password] {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
}
.form-container input[type=text]:focus, .form-container input[type=password]:focus {
  background-color: #ddd;
  outline: none;
}
.form-container .btn {
  background-color: #4CAF50;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom:10px;
  opacity: 0.8;
}
.form-container .cancel {
  background-color: red;
}
#alert{
  display:block;
  color:white;
  pointer-events:none;
  animation: fadeOut 2s;
  animation-fill-mode: forwards;
}
@keyframes fadeOut {
    from {
    opacity:1;
    visibility:visible;
    }
    to {
    opacity:0;
    visibility:hidden;
    }
}
.reglog{
cursor:pointer;
}
</style>

